<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Home Page</title>

	<!-- bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script src="https://kit.fontawesome.com/4f112d1706.js" crossorigin="anonymous"></script>

	<!-- style -->
	<link rel="stylesheet" href="css/style.css">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
	<!-- firebase -->
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
	<!-- TODO: Add SDKs for Firebase products that you want to use -->
	<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-analytics.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-database.js"></script>
	<script>
	  // Your web app's Firebase configuration
	  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
	  var firebaseConfig = {
	    apiKey: "AIzaSyDAgPd7xqatK-zmwJizsDAfW6x7_SkoE7w",
	    authDomain: "leftcoast-4cfc2.firebaseapp.com",
	    databaseURL: "https://leftcoast-4cfc2.firebaseio.com",
	    projectId: "leftcoast-4cfc2",
	    storageBucket: "leftcoast-4cfc2.appspot.com",
	    messagingSenderId: "526978566494",
	    appId: "1:526978566494:web:6e191cc2141f84c2c6e7cf",
	    measurementId: "G-DPT355PHZF"
	  };
	  // Initialize Firebase
	  firebase.initializeApp(firebaseConfig);
	  firebase.analytics();
	  const db = firebase.firestore();
	  const auth = firebase.auth();
	</script><!-- end firebase setup -->

	<header>
		<a href="main.html" class="logo"><img src="images/logo.jpeg"></a>
		<ul>
			<li class="logged-in"><a href="cart.html"><i class="fa fa-shopping-basket"></i>Cart</a></li>
			<li><a href="contact.html">Contact</a></li>
			<li class="logged-out"><a href="account.html">Accounts</a></li>
			<li class="logged-in"><a href="#" id="logout">Logout</a></li>
			<li><i class="fa fa-bars" id="menu-btn" onclick="openmenu()"></i></li>
			<li><i class="fa fa-times" id="close-btn" onclick="closemenu()"></i></li>
		</ul>
	</header>
	<section class="banner"></section>
	<script type="text/javascript">
		window.addEventListener("scroll", function(){
			var header = document.querySelector("header");
			header.classList.toggle("sticky", window.scrollY > 0);
		})
	</script>


	<!-- logout button -->
	<script>
		$("#logout").click(function(){
        firebase.auth().signOut().then(function() {
        	loggedOut();
      		}).catch(function(error) {
        	// An error happened.
      		});
		});
	</script>


	<div class="container cart-page text-center">
		<h4 class="container text-center title-box-3">Cart</h4>

		<ul id="cart-list" class="cartStyle" ></ul>

		<a href="#" class="viewButton" href="">Submit Quote</a>


		<h6 class="cart-page">Please note that every ordered placed through Left Coast is on an open account and must be verified over the phone with your salesman. After submitting your quote you will recieve a call from your salesman by then end of the next business day. <br>For immediate service call today at 951-781-3739</h6>
	</div>




	<!---- webiste features ----->
	<section class="website-features">
		<div class="container">
			<div class="row">
				
				<!-- satisfcation -->
				<div class="col-md-3 feature-box">
					<img src="images/satisfaction.png">
					<div class="feature-text">
						<p><b>100% Satisfaction Guarantee.</b> We Pride Ourselves In Customer Satisfaction</p>
					</div><!--- text end --->
				</div><!-- column end -->

				<!-- shipping -->
				<div class="col-md-3 feature-box">
					<img src="images/shipping.png">
					<div class="feature-text">
						<p><b>Free Shipping</b> On Every Order Over $100</p>
					</div><!--- text end --->
				</div><!-- column end -->

				<!-- returns -->
				<div class="col-md-3 feature-box">
					<img src="images/returns.png">
					<div class="feature-text">
						<p><b>Free Returns</b> On Qualified Items Withtin 30 Days</p>
					</div><!--- text end --->
				</div><!-- column end -->

				<!-- 30 day -->
				<div class="col-md-3 feature-box">
					<img src="images/30day.png">
					<div class="feature-text">
						<p><b>30 Day Financing</b> Available On Qualified Accounts</p>
					</div><!--- text end --->
				</div><!-- column end -->

			</div><!--- row end -->
		</div><!-- containter end -->
	</section><!--- website features end -->

	<!-- footer -->
	<section class="footer">
		<div class="container text-center">
			<div class="row">
				
				<!-- useful links -->
				<div class="col-md-3">
					<h1>Useful Links</h1>
					<p>Privacy Policy</p>
					<p>Return Policy</p>
					<p>Terms of Use</p>
				</div><!--- column end -->

				<!-- copmpany links -->
				<div class="col-md-3">
					<h1>Company</h1>
					<p>About Us</p>
					<p>Contact Us</p>
					<p>Affiliate</p>
				</div><!--- column end -->

				<!-- follow -->
				<div class="col-md-3">
					<h1>Follow Us On</h1>
					<p><i class="fa fa-facebook-official"></i> Facebook</p>
					<p><i class="fa fa-instagram"></i> Instagram</p>
					<p><i class="fa fa-linkedin"></i> Linkedin</p>
				</div><!--- column end -->

				<!-- follow -->
				<div class="col-md-3 footer-image">
					<h1>Download App</h1>
					<img src="images/appsoon.png">
				</div><!--- column end -->

			</div><!-- row end -->

			<hr>
			<p class="copyright">Website Created By Curtis Stephens. For Business Inqueries Contact rizerr@gmail.com</p>
		</div><!-- container end -->

	</section><!-- footer end -->

	<!--- java -->
	<script src="app.js"></script>
	

	<script>
		firebase.auth().onAuthStateChanged(user =>{
		  	if (user) {
		  		console.log('User Logged In: ', user.uid);
		  		setupUI(user);
		  				const userID = user.uid;
						db.collection('users').doc(user.uid).collection('cart').orderBy('stockNum').onSnapshot(snapshot => {
						    let changes = snapshot.docChanges();
						    changes.forEach(change => {
						        console.log(change.doc.data());
						        if(change.type == 'added'){
						            renderCart(change.doc);
						        } else if (change.type == 'removed'){
						            let li = cartList.querySelector('[data-id=' + change.doc.id + ']');
						            cartList.removeChild(li);
						        }
						    });
						});
		  	}
		  	else{
		  		console.log('User Logged Out');
		  		setupUI();
		  	}
		});

		const cartList = document.querySelector('#cart-list');

// create element & render cafe
function renderCart(doc){
    let li = document.createElement('li');
    let name = document.createElement('span');
    let stock = document.createElement('span');
    let cross = document.createElement('button');


    li.setAttribute('data-id', doc.id);
    name.textContent =  doc.data().name;
    stock.textContent = "-" + doc.data().stockNum + "   ";
    cross.textContent = 'Remove';

    
    li.appendChild(stock);
    li.appendChild(name);
    li.appendChild(cross);

    cartList.appendChild(li);

        // deleting data
    cross.addEventListener('click', (e) => {
        e.stopPropagation();
        let id = e.target.parentElement.getAttribute('data-id');
        var user = firebase.auth().currentUser;
        console.log(user.uid);
        db.collection('users').doc(user.uid).collection('cart').doc(id).delete();
    });
}



	</script>





</body>
</html>